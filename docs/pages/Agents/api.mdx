---
title: Interacting with Agents via API
description: Learn how to programmatically interact with DocsGPT Agents using the streaming and non-streaming API endpoints.
---

import { Callout, Tabs } from 'nextra/components';

# Interacting with Agents via API

DocsGPT Agents can be accessed programmatically through a dedicated API, allowing you to integrate their specialized capabilities into your own applications, scripts, and workflows. This guide covers the two primary methods for interacting with an agent: the streaming API for real-time responses and the non-streaming API for a single, consolidated answer.

When you use an API key generated for a specific agent, you do not need to pass `prompt`, `tools` etc. The agent's configuration (including its prompt, selected tools, and knowledge sources) is already associated with its unique API key. 

### API Endpoints

- **Non-Streaming:** `http://localhost:7091/api/answer`
- **Streaming:** `http://localhost:7091/stream`
- **Search:** `http://localhost:7091/api/search` (POST) â€“ Retrieve relevant documents for a query without generating a full answer.

<Callout type="info">
For DocsGPT Cloud, use `https://gptcloud.arc53.com/` as the base URL.
</Callout>

For more technical details, you can explore the API swagger documentation available for the cloud version or your local instance.

---

## Non-Streaming API (`/api/answer`)

This is a standard synchronous endpoint. It waits for the agent to fully process the request and returns a single JSON object with the complete answer. This is the simplest method and is ideal for backend processes where a real-time feed is not required.

### Request

-   **Endpoint:** `/api/answer`
-   **Method:** `POST`
-   **Payload:**
    -   `question` (string, required): The user's query or input for the agent.
    -   `api_key` (string, required): The unique API key for the agent you wish to interact with.
    -   `history` (string, optional): A JSON string representing the conversation history, e.g., `[{\"prompt\": \"first question\", \"answer\": \"first answer\"}]`.

### Response

A single JSON object containing:
-   `answer`: The complete, final answer from the agent.
-   `sources`: A list of sources the agent consulted.
-   `conversation_id`: The unique ID for the interaction.

### Examples

<Tabs items={['cURL', 'Python', 'JavaScript']}>
  <Tabs.Tab>
    ```bash
    curl -X POST http://localhost:7091/api/answer \
    -H "Content-Type: application/json" \
    -d '{
        "question": "your question here",
        "api_key": "your_agent_api_key"
    }'
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```python
    import requests

    API_URL = "http://localhost:7091/api/answer"
    API_KEY = "your_agent_api_key"
    QUESTION = "your question here"

    response = requests.post(
        API_URL,
        json={"question": QUESTION, "api_key": API_KEY}
    )

    if response.status_code == 200:
        print(response.json())
    else:
        print(f"Error: {response.status_code}")
        print(response.text)
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    const apiUrl = 'http://localhost:7091/api/answer';
    const apiKey = 'your_agent_api_key';
    const question = 'your question here';

    async function getAnswer() {
    try {
        const response = await fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ question, api_key: apiKey }),
        });

        if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
        }

        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error("Failed to fetch answer:", error);
    }
    }

    getAnswer();
    ```
  </Tabs.Tab>
</Tabs>

---

## Search API (`/api/search`)

This endpoint allows you to retrieve relevant documents for a given query without generating a full answer. It's useful for use cases where you only need the source content.

### Request

-   **Endpoint:** `/api/search`
-   **Method:** `POST`
-   **Payload:**
    -   `question` (string, required): The user's query.
    -   `chunks` (integer, optional): Number of chunks to retrieve (default: 2).
    -   `api_key` (string, optional): API key for authentication.
    -   `active_docs` (string, optional): ID of the active document source.
    -   `retriever` (string, optional): Retriever type.
    -   `token_limit` (integer, optional): Token limit for retrieval.
    -   `isNoneDoc` (boolean, optional): If true, retrieval skips document context.

### Response

An array of document objects containing:
-   `id`: Document ID.
-   `source`: The origin of the document.
-   `text`: The content snippet retrieved.

### Examples

<Tabs items={['cURL', 'Python', 'JavaScript']}>
  <Tabs.Tab>
    ```bash
    curl -X POST http://localhost:7091/api/search \
    -H "Content-Type: application/json" \
    -d '{
        "question": "your question here"
    }'
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```python
    import requests

    API_URL = "http://localhost:7091/api/search"
    payload = {"question": "your question here"}

    response = requests.post(API_URL, json=payload)
    print(response.json())
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    const apiUrl = 'http://localhost:7091/api/search';
    const question = 'your question here';

    async function getDocs() {
      const response = await fetch(apiUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ question })
      });
      const docs = await response.json();
      console.log(docs);
    }

    getDocs();
    ```
  </Tabs.Tab>
</Tabs>
